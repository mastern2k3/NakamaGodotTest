/* Code generated by openapi-gen/main.go. DO NOT EDIT. */

namespace Nakama
{
    using System;
    using System.Collections.Generic;
    using System.Net;
    using System.Net.Http;
    using System.Net.Http.Headers;
    using System.Runtime.Serialization;
    using System.Text;
    using System.Threading.Tasks;
    using TinyJson;

    /// <summary>
    /// An exception generated for <c>HttpResponse</c> objects don't return a success status.
    /// </summary>
    public sealed class ApiResponseException : Exception
    {
        public HttpStatusCode StatusCode { get; }

        public int GrpcStatusCode { get; }

        public ApiResponseException(HttpStatusCode statusCode, string content, int grpcCode) : base(content)
        {
            StatusCode = statusCode;
            GrpcStatusCode = grpcCode;
        }

        public override string ToString()
        {
            return $"ApiResponseException(StatusCode={StatusCode}, Message='{Message}', GrpcStatusCode={GrpcStatusCode})";
        }
    }

    /// <summary>
    /// A single user-role pair.
    /// </summary>
    public interface IGroupUserListGroupUser
    {

        /// <summary>
        /// Their relationship to the group.
        /// </summary>
        int State { get; }

        /// <summary>
        /// User.
        /// </summary>
        IApiUser User { get; }
    }

    /// <inheritdoc />
    internal class GroupUserListGroupUser : IGroupUserListGroupUser
    {

        /// <inheritdoc />
        [DataMember(Name="state")]
        public int State { get; set; }

        /// <inheritdoc />
        public IApiUser User => _user;
        [DataMember(Name="user")]
        public ApiUser _user { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "State: ", State, ", ");
            output = string.Concat(output, "User: ", User, ", ");
            return output;
        }
    }

    /// <summary>
    /// A single group-role pair.
    /// </summary>
    public interface IUserGroupListUserGroup
    {

        /// <summary>
        /// Group.
        /// </summary>
        IApiGroup Group { get; }

        /// <summary>
        /// The user's relationship to the group.
        /// </summary>
        int State { get; }
    }

    /// <inheritdoc />
    internal class UserGroupListUserGroup : IUserGroupListUserGroup
    {

        /// <inheritdoc />
        public IApiGroup Group => _group;
        [DataMember(Name="group")]
        public ApiGroup _group { get; set; }

        /// <inheritdoc />
        [DataMember(Name="state")]
        public int State { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Group: ", Group, ", ");
            output = string.Concat(output, "State: ", State, ", ");
            return output;
        }
    }

    /// <summary>
    /// Record values to write.
    /// </summary>
    public interface IWriteLeaderboardRecordRequestLeaderboardRecordWrite
    {

        /// <summary>
        /// Optional record metadata.
        /// </summary>
        string Metadata { get; }

        /// <summary>
        /// The score value to submit.
        /// </summary>
        string Score { get; }

        /// <summary>
        /// An optional secondary value.
        /// </summary>
        string Subscore { get; }
    }

    /// <inheritdoc />
    internal class WriteLeaderboardRecordRequestLeaderboardRecordWrite : IWriteLeaderboardRecordRequestLeaderboardRecordWrite
    {

        /// <inheritdoc />
        [DataMember(Name="metadata")]
        public string Metadata { get; set; }

        /// <inheritdoc />
        [DataMember(Name="score")]
        public string Score { get; set; }

        /// <inheritdoc />
        [DataMember(Name="subscore")]
        public string Subscore { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Metadata: ", Metadata, ", ");
            output = string.Concat(output, "Score: ", Score, ", ");
            output = string.Concat(output, "Subscore: ", Subscore, ", ");
            return output;
        }
    }

    /// <summary>
    /// Record values to write.
    /// </summary>
    public interface IWriteTournamentRecordRequestTournamentRecordWrite
    {

        /// <summary>
        /// A JSON object of additional properties (optional).
        /// </summary>
        string Metadata { get; }

        /// <summary>
        /// The score value to submit.
        /// </summary>
        string Score { get; }

        /// <summary>
        /// An optional secondary value.
        /// </summary>
        string Subscore { get; }
    }

    /// <inheritdoc />
    internal class WriteTournamentRecordRequestTournamentRecordWrite : IWriteTournamentRecordRequestTournamentRecordWrite
    {

        /// <inheritdoc />
        [DataMember(Name="metadata")]
        public string Metadata { get; set; }

        /// <inheritdoc />
        [DataMember(Name="score")]
        public string Score { get; set; }

        /// <inheritdoc />
        [DataMember(Name="subscore")]
        public string Subscore { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Metadata: ", Metadata, ", ");
            output = string.Concat(output, "Score: ", Score, ", ");
            output = string.Concat(output, "Subscore: ", Subscore, ", ");
            return output;
        }
    }

    /// <summary>
    /// A user with additional account details. Always the current user.
    /// </summary>
    public interface IApiAccount
    {

        /// <summary>
        /// The custom id in the user's account.
        /// </summary>
        string CustomId { get; }

        /// <summary>
        /// The devices which belong to the user's account.
        /// </summary>
        IEnumerable<IApiAccountDevice> Devices { get; }

        /// <summary>
        /// The email address of the user.
        /// </summary>
        string Email { get; }

        /// <summary>
        /// The user object.
        /// </summary>
        IApiUser User { get; }

        /// <summary>
        /// The UNIX time when the user's email was verified.
        /// </summary>
        string VerifyTime { get; }

        /// <summary>
        /// The user's wallet data.
        /// </summary>
        string Wallet { get; }
    }

    /// <inheritdoc />
    internal class ApiAccount : IApiAccount
    {

        /// <inheritdoc />
        [DataMember(Name="custom_id")]
        public string CustomId { get; set; }

        /// <inheritdoc />
        public IEnumerable<IApiAccountDevice> Devices => _devices ?? new List<ApiAccountDevice>(0);
        [DataMember(Name="devices")]
        public List<ApiAccountDevice> _devices { get; set; }

        /// <inheritdoc />
        [DataMember(Name="email")]
        public string Email { get; set; }

        /// <inheritdoc />
        public IApiUser User => _user;
        [DataMember(Name="user")]
        public ApiUser _user { get; set; }

        /// <inheritdoc />
        [DataMember(Name="verify_time")]
        public string VerifyTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="wallet")]
        public string Wallet { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "CustomId: ", CustomId, ", ");
            output = string.Concat(output, "Devices: [", string.Join(", ", Devices), "], ");
            output = string.Concat(output, "Email: ", Email, ", ");
            output = string.Concat(output, "User: ", User, ", ");
            output = string.Concat(output, "VerifyTime: ", VerifyTime, ", ");
            output = string.Concat(output, "Wallet: ", Wallet, ", ");
            return output;
        }
    }

    /// <summary>
    /// Send a custom ID to the server. Used with authenticate/link/unlink.
    /// </summary>
    public interface IApiAccountCustom
    {

        /// <summary>
        /// A custom identifier.
        /// </summary>
        string Id { get; }
    }

    /// <inheritdoc />
    internal class ApiAccountCustom : IApiAccountCustom
    {

        /// <inheritdoc />
        [DataMember(Name="id")]
        public string Id { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Id: ", Id, ", ");
            return output;
        }
    }

    /// <summary>
    /// Send a device to the server. Used with authenticate/link/unlink and user.
    /// </summary>
    public interface IApiAccountDevice
    {

        /// <summary>
        /// A device identifier. Should be obtained by a platform-specific device API.
        /// </summary>
        string Id { get; }
    }

    /// <inheritdoc />
    internal class ApiAccountDevice : IApiAccountDevice
    {

        /// <inheritdoc />
        [DataMember(Name="id")]
        public string Id { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Id: ", Id, ", ");
            return output;
        }
    }

    /// <summary>
    /// Send an email with password to the server. Used with authenticate/link/unlink.
    /// </summary>
    public interface IApiAccountEmail
    {

        /// <summary>
        /// A valid RFC-5322 email address.
        /// </summary>
        string Email { get; }

        /// <summary>
        /// A password for the user account.
        /// </summary>
        string Password { get; }
    }

    /// <inheritdoc />
    internal class ApiAccountEmail : IApiAccountEmail
    {

        /// <inheritdoc />
        [DataMember(Name="email")]
        public string Email { get; set; }

        /// <inheritdoc />
        [DataMember(Name="password")]
        public string Password { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Email: ", Email, ", ");
            output = string.Concat(output, "Password: ", Password, ", ");
            return output;
        }
    }

    /// <summary>
    /// Send a Facebook token to the server. Used with authenticate/link/unlink.
    /// </summary>
    public interface IApiAccountFacebook
    {

        /// <summary>
        /// The OAuth token received from Facebook to access their profile API.
        /// </summary>
        string Token { get; }
    }

    /// <inheritdoc />
    internal class ApiAccountFacebook : IApiAccountFacebook
    {

        /// <inheritdoc />
        [DataMember(Name="token")]
        public string Token { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Token: ", Token, ", ");
            return output;
        }
    }

    /// <summary>
    /// Send Apple's Game Center account credentials to the server. Used with authenticate/link/unlink.
    /// </summary>
    public interface IApiAccountGameCenter
    {

        /// <summary>
        /// Bundle ID (generated by GameCenter).
        /// </summary>
        string BundleId { get; }

        /// <summary>
        /// Player ID (generated by GameCenter).
        /// </summary>
        string PlayerId { get; }

        /// <summary>
        /// The URL for the public encryption key.
        /// </summary>
        string PublicKeyUrl { get; }

        /// <summary>
        /// A random "NSString" used to compute the hash and keep it randomized.
        /// </summary>
        string Salt { get; }

        /// <summary>
        /// The verification signature data generated.
        /// </summary>
        string Signature { get; }

        /// <summary>
        /// Time since UNIX epoch when the signature was created.
        /// </summary>
        string TimestampSeconds { get; }
    }

    /// <inheritdoc />
    internal class ApiAccountGameCenter : IApiAccountGameCenter
    {

        /// <inheritdoc />
        [DataMember(Name="bundle_id")]
        public string BundleId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="player_id")]
        public string PlayerId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="public_key_url")]
        public string PublicKeyUrl { get; set; }

        /// <inheritdoc />
        [DataMember(Name="salt")]
        public string Salt { get; set; }

        /// <inheritdoc />
        [DataMember(Name="signature")]
        public string Signature { get; set; }

        /// <inheritdoc />
        [DataMember(Name="timestamp_seconds")]
        public string TimestampSeconds { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "BundleId: ", BundleId, ", ");
            output = string.Concat(output, "PlayerId: ", PlayerId, ", ");
            output = string.Concat(output, "PublicKeyUrl: ", PublicKeyUrl, ", ");
            output = string.Concat(output, "Salt: ", Salt, ", ");
            output = string.Concat(output, "Signature: ", Signature, ", ");
            output = string.Concat(output, "TimestampSeconds: ", TimestampSeconds, ", ");
            return output;
        }
    }

    /// <summary>
    /// Send a Google token to the server. Used with authenticate/link/unlink.
    /// </summary>
    public interface IApiAccountGoogle
    {

        /// <summary>
        /// The OAuth token received from Google to access their profile API.
        /// </summary>
        string Token { get; }
    }

    /// <inheritdoc />
    internal class ApiAccountGoogle : IApiAccountGoogle
    {

        /// <inheritdoc />
        [DataMember(Name="token")]
        public string Token { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Token: ", Token, ", ");
            return output;
        }
    }

    /// <summary>
    /// Send a Steam token to the server. Used with authenticate/link/unlink.
    /// </summary>
    public interface IApiAccountSteam
    {

        /// <summary>
        /// The account token received from Steam to access their profile API.
        /// </summary>
        string Token { get; }
    }

    /// <inheritdoc />
    internal class ApiAccountSteam : IApiAccountSteam
    {

        /// <inheritdoc />
        [DataMember(Name="token")]
        public string Token { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Token: ", Token, ", ");
            return output;
        }
    }

    /// <summary>
    /// A message sent on a channel.
    /// </summary>
    public interface IApiChannelMessage
    {

        /// <summary>
        /// The channel this message belongs to.
        /// </summary>
        string ChannelId { get; }

        /// <summary>
        /// The code representing a message type or category.
        /// </summary>
        int Code { get; }

        /// <summary>
        /// The content payload.
        /// </summary>
        string Content { get; }

        /// <summary>
        /// The UNIX time when the message was created.
        /// </summary>
        string CreateTime { get; }

        /// <summary>
        /// The unique ID of this message.
        /// </summary>
        string MessageId { get; }

        /// <summary>
        /// True if the message was persisted to the channel's history, false otherwise.
        /// </summary>
        bool Persistent { get; }

        /// <summary>
        /// Message sender, usually a user ID.
        /// </summary>
        string SenderId { get; }

        /// <summary>
        /// The UNIX time when the message was last updated.
        /// </summary>
        string UpdateTime { get; }

        /// <summary>
        /// The username of the message sender, if any.
        /// </summary>
        string Username { get; }
    }

    /// <inheritdoc />
    internal class ApiChannelMessage : IApiChannelMessage
    {

        /// <inheritdoc />
        [DataMember(Name="channel_id")]
        public string ChannelId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="code")]
        public int Code { get; set; }

        /// <inheritdoc />
        [DataMember(Name="content")]
        public string Content { get; set; }

        /// <inheritdoc />
        [DataMember(Name="create_time")]
        public string CreateTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="message_id")]
        public string MessageId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="persistent")]
        public bool Persistent { get; set; }

        /// <inheritdoc />
        [DataMember(Name="sender_id")]
        public string SenderId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="update_time")]
        public string UpdateTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="username")]
        public string Username { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "ChannelId: ", ChannelId, ", ");
            output = string.Concat(output, "Code: ", Code, ", ");
            output = string.Concat(output, "Content: ", Content, ", ");
            output = string.Concat(output, "CreateTime: ", CreateTime, ", ");
            output = string.Concat(output, "MessageId: ", MessageId, ", ");
            output = string.Concat(output, "Persistent: ", Persistent, ", ");
            output = string.Concat(output, "SenderId: ", SenderId, ", ");
            output = string.Concat(output, "UpdateTime: ", UpdateTime, ", ");
            output = string.Concat(output, "Username: ", Username, ", ");
            return output;
        }
    }

    /// <summary>
    /// A list of channel messages, usually a result of a list operation.
    /// </summary>
    public interface IApiChannelMessageList
    {

        /// <summary>
        /// A list of messages.
        /// </summary>
        IEnumerable<IApiChannelMessage> Messages { get; }

        /// <summary>
        /// The cursor to send when retireving the next page, if any.
        /// </summary>
        string NextCursor { get; }

        /// <summary>
        /// The cursor to send when retrieving the previous page, if any.
        /// </summary>
        string PrevCursor { get; }
    }

    /// <inheritdoc />
    internal class ApiChannelMessageList : IApiChannelMessageList
    {

        /// <inheritdoc />
        public IEnumerable<IApiChannelMessage> Messages => _messages ?? new List<ApiChannelMessage>(0);
        [DataMember(Name="messages")]
        public List<ApiChannelMessage> _messages { get; set; }

        /// <inheritdoc />
        [DataMember(Name="next_cursor")]
        public string NextCursor { get; set; }

        /// <inheritdoc />
        [DataMember(Name="prev_cursor")]
        public string PrevCursor { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Messages: [", string.Join(", ", Messages), "], ");
            output = string.Concat(output, "NextCursor: ", NextCursor, ", ");
            output = string.Concat(output, "PrevCursor: ", PrevCursor, ", ");
            return output;
        }
    }

    /// <summary>
    /// Create a group with the current user as owner.
    /// </summary>
    public interface IApiCreateGroupRequest
    {

        /// <summary>
        /// A URL for an avatar image.
        /// </summary>
        string AvatarUrl { get; }

        /// <summary>
        /// A description for the group.
        /// </summary>
        string Description { get; }

        /// <summary>
        /// The language expected to be a tag which follows the BCP-47 spec.
        /// </summary>
        string LangTag { get; }

        /// <summary>
        /// A unique name for the group.
        /// </summary>
        string Name { get; }

        /// <summary>
        /// Mark a group as open or not where only admins can accept members.
        /// </summary>
        bool Open { get; }
    }

    /// <inheritdoc />
    internal class ApiCreateGroupRequest : IApiCreateGroupRequest
    {

        /// <inheritdoc />
        [DataMember(Name="avatar_url")]
        public string AvatarUrl { get; set; }

        /// <inheritdoc />
        [DataMember(Name="description")]
        public string Description { get; set; }

        /// <inheritdoc />
        [DataMember(Name="lang_tag")]
        public string LangTag { get; set; }

        /// <inheritdoc />
        [DataMember(Name="name")]
        public string Name { get; set; }

        /// <inheritdoc />
        [DataMember(Name="open")]
        public bool Open { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "AvatarUrl: ", AvatarUrl, ", ");
            output = string.Concat(output, "Description: ", Description, ", ");
            output = string.Concat(output, "LangTag: ", LangTag, ", ");
            output = string.Concat(output, "Name: ", Name, ", ");
            output = string.Concat(output, "Open: ", Open, ", ");
            return output;
        }
    }

    /// <summary>
    /// Storage objects to delete.
    /// </summary>
    public interface IApiDeleteStorageObjectId
    {

        /// <summary>
        /// The collection which stores the object.
        /// </summary>
        string Collection { get; }

        /// <summary>
        /// The key of the object within the collection.
        /// </summary>
        string Key { get; }

        /// <summary>
        /// The version hash of the object.
        /// </summary>
        string Version { get; }
    }

    /// <inheritdoc />
    internal class ApiDeleteStorageObjectId : IApiDeleteStorageObjectId
    {

        /// <inheritdoc />
        [DataMember(Name="collection")]
        public string Collection { get; set; }

        /// <inheritdoc />
        [DataMember(Name="key")]
        public string Key { get; set; }

        /// <inheritdoc />
        [DataMember(Name="version")]
        public string Version { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Collection: ", Collection, ", ");
            output = string.Concat(output, "Key: ", Key, ", ");
            output = string.Concat(output, "Version: ", Version, ", ");
            return output;
        }
    }

    /// <summary>
    /// Batch delete storage objects.
    /// </summary>
    public interface IApiDeleteStorageObjectsRequest
    {

        /// <summary>
        /// Batch of storage objects.
        /// </summary>
        IEnumerable<IApiDeleteStorageObjectId> ObjectIds { get; }
    }

    /// <inheritdoc />
    internal class ApiDeleteStorageObjectsRequest : IApiDeleteStorageObjectsRequest
    {

        /// <inheritdoc />
        public IEnumerable<IApiDeleteStorageObjectId> ObjectIds => _objectIds ?? new List<ApiDeleteStorageObjectId>(0);
        [DataMember(Name="object_ids")]
        public List<ApiDeleteStorageObjectId> _objectIds { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "ObjectIds: [", string.Join(", ", ObjectIds), "], ");
            return output;
        }
    }

    /// <summary>
    /// A friend of a user.
    /// </summary>
    public interface IApiFriend
    {

        /// <summary>
        /// The friend status.
        /// </summary>
        int State { get; }

        /// <summary>
        /// The user object.
        /// </summary>
        IApiUser User { get; }
    }

    /// <inheritdoc />
    internal class ApiFriend : IApiFriend
    {

        /// <inheritdoc />
        [DataMember(Name="state")]
        public int State { get; set; }

        /// <inheritdoc />
        public IApiUser User => _user;
        [DataMember(Name="user")]
        public ApiUser _user { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "State: ", State, ", ");
            output = string.Concat(output, "User: ", User, ", ");
            return output;
        }
    }

    /// <summary>
    /// A collection of zero or more friends of the user.
    /// </summary>
    public interface IApiFriends
    {

        /// <summary>
        /// The Friend objects.
        /// </summary>
        IEnumerable<IApiFriend> Friends { get; }
    }

    /// <inheritdoc />
    internal class ApiFriends : IApiFriends
    {

        /// <inheritdoc />
        public IEnumerable<IApiFriend> Friends => _friends ?? new List<ApiFriend>(0);
        [DataMember(Name="friends")]
        public List<ApiFriend> _friends { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Friends: [", string.Join(", ", Friends), "], ");
            return output;
        }
    }

    /// <summary>
    /// A group in the server.
    /// </summary>
    public interface IApiGroup
    {

        /// <summary>
        /// A URL for an avatar image.
        /// </summary>
        string AvatarUrl { get; }

        /// <summary>
        /// The UNIX time when the group was created.
        /// </summary>
        string CreateTime { get; }

        /// <summary>
        /// The id of the user who created the group.
        /// </summary>
        string CreatorId { get; }

        /// <summary>
        /// A description for the group.
        /// </summary>
        string Description { get; }

        /// <summary>
        /// The current count of all members in the group.
        /// </summary>
        int EdgeCount { get; }

        /// <summary>
        /// The id of a group.
        /// </summary>
        string Id { get; }

        /// <summary>
        /// The language expected to be a tag which follows the BCP-47 spec.
        /// </summary>
        string LangTag { get; }

        /// <summary>
        /// The maximum number of members allowed.
        /// </summary>
        int MaxCount { get; }

        /// <summary>
        /// Additional information stored as a JSON object.
        /// </summary>
        string Metadata { get; }

        /// <summary>
        /// The unique name of the group.
        /// </summary>
        string Name { get; }

        /// <summary>
        /// Anyone can join open groups, otherwise only admins can accept members.
        /// </summary>
        bool Open { get; }

        /// <summary>
        /// The UNIX time when the group was last updated.
        /// </summary>
        string UpdateTime { get; }
    }

    /// <inheritdoc />
    internal class ApiGroup : IApiGroup
    {

        /// <inheritdoc />
        [DataMember(Name="avatar_url")]
        public string AvatarUrl { get; set; }

        /// <inheritdoc />
        [DataMember(Name="create_time")]
        public string CreateTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="creator_id")]
        public string CreatorId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="description")]
        public string Description { get; set; }

        /// <inheritdoc />
        [DataMember(Name="edge_count")]
        public int EdgeCount { get; set; }

        /// <inheritdoc />
        [DataMember(Name="id")]
        public string Id { get; set; }

        /// <inheritdoc />
        [DataMember(Name="lang_tag")]
        public string LangTag { get; set; }

        /// <inheritdoc />
        [DataMember(Name="max_count")]
        public int MaxCount { get; set; }

        /// <inheritdoc />
        [DataMember(Name="metadata")]
        public string Metadata { get; set; }

        /// <inheritdoc />
        [DataMember(Name="name")]
        public string Name { get; set; }

        /// <inheritdoc />
        [DataMember(Name="open")]
        public bool Open { get; set; }

        /// <inheritdoc />
        [DataMember(Name="update_time")]
        public string UpdateTime { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "AvatarUrl: ", AvatarUrl, ", ");
            output = string.Concat(output, "CreateTime: ", CreateTime, ", ");
            output = string.Concat(output, "CreatorId: ", CreatorId, ", ");
            output = string.Concat(output, "Description: ", Description, ", ");
            output = string.Concat(output, "EdgeCount: ", EdgeCount, ", ");
            output = string.Concat(output, "Id: ", Id, ", ");
            output = string.Concat(output, "LangTag: ", LangTag, ", ");
            output = string.Concat(output, "MaxCount: ", MaxCount, ", ");
            output = string.Concat(output, "Metadata: ", Metadata, ", ");
            output = string.Concat(output, "Name: ", Name, ", ");
            output = string.Concat(output, "Open: ", Open, ", ");
            output = string.Concat(output, "UpdateTime: ", UpdateTime, ", ");
            return output;
        }
    }

    /// <summary>
    /// One or more groups returned from a listing operation.
    /// </summary>
    public interface IApiGroupList
    {

        /// <summary>
        /// A cursor used to get the next page.
        /// </summary>
        string Cursor { get; }

        /// <summary>
        /// One or more groups.
        /// </summary>
        IEnumerable<IApiGroup> Groups { get; }
    }

    /// <inheritdoc />
    internal class ApiGroupList : IApiGroupList
    {

        /// <inheritdoc />
        [DataMember(Name="cursor")]
        public string Cursor { get; set; }

        /// <inheritdoc />
        public IEnumerable<IApiGroup> Groups => _groups ?? new List<ApiGroup>(0);
        [DataMember(Name="groups")]
        public List<ApiGroup> _groups { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Cursor: ", Cursor, ", ");
            output = string.Concat(output, "Groups: [", string.Join(", ", Groups), "], ");
            return output;
        }
    }

    /// <summary>
    /// A list of users belonging to a group, along with their role.
    /// </summary>
    public interface IApiGroupUserList
    {

        /// <summary>
        /// User-role pairs for a group.
        /// </summary>
        IEnumerable<IGroupUserListGroupUser> GroupUsers { get; }
    }

    /// <inheritdoc />
    internal class ApiGroupUserList : IApiGroupUserList
    {

        /// <inheritdoc />
        public IEnumerable<IGroupUserListGroupUser> GroupUsers => _groupUsers ?? new List<GroupUserListGroupUser>(0);
        [DataMember(Name="group_users")]
        public List<GroupUserListGroupUser> _groupUsers { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "GroupUsers: [", string.Join(", ", GroupUsers), "], ");
            return output;
        }
    }

    /// <summary>
    /// Represents a complete leaderboard record with all scores and associated metadata.
    /// </summary>
    public interface IApiLeaderboardRecord
    {

        /// <summary>
        /// The UNIX time when the leaderboard record was created.
        /// </summary>
        string CreateTime { get; }

        /// <summary>
        /// The UNIX time when the leaderboard record expires.
        /// </summary>
        string ExpiryTime { get; }

        /// <summary>
        /// The ID of the leaderboard this score belongs to.
        /// </summary>
        string LeaderboardId { get; }

        /// <summary>
        /// The maximum number of score updates allowed by the owner.
        /// </summary>
        int MaxNumScore { get; }

        /// <summary>
        /// Metadata.
        /// </summary>
        string Metadata { get; }

        /// <summary>
        /// The number of submissions to this score record.
        /// </summary>
        int NumScore { get; }

        /// <summary>
        /// The ID of the score owner, usually a user or group.
        /// </summary>
        string OwnerId { get; }

        /// <summary>
        /// The rank of this record.
        /// </summary>
        string Rank { get; }

        /// <summary>
        /// The score value.
        /// </summary>
        string Score { get; }

        /// <summary>
        /// An optional subscore value.
        /// </summary>
        string Subscore { get; }

        /// <summary>
        /// The UNIX time when the leaderboard record was updated.
        /// </summary>
        string UpdateTime { get; }

        /// <summary>
        /// The username of the score owner, if the owner is a user.
        /// </summary>
        string Username { get; }
    }

    /// <inheritdoc />
    internal class ApiLeaderboardRecord : IApiLeaderboardRecord
    {

        /// <inheritdoc />
        [DataMember(Name="create_time")]
        public string CreateTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="expiry_time")]
        public string ExpiryTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="leaderboard_id")]
        public string LeaderboardId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="max_num_score")]
        public int MaxNumScore { get; set; }

        /// <inheritdoc />
        [DataMember(Name="metadata")]
        public string Metadata { get; set; }

        /// <inheritdoc />
        [DataMember(Name="num_score")]
        public int NumScore { get; set; }

        /// <inheritdoc />
        [DataMember(Name="owner_id")]
        public string OwnerId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="rank")]
        public string Rank { get; set; }

        /// <inheritdoc />
        [DataMember(Name="score")]
        public string Score { get; set; }

        /// <inheritdoc />
        [DataMember(Name="subscore")]
        public string Subscore { get; set; }

        /// <inheritdoc />
        [DataMember(Name="update_time")]
        public string UpdateTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="username")]
        public string Username { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "CreateTime: ", CreateTime, ", ");
            output = string.Concat(output, "ExpiryTime: ", ExpiryTime, ", ");
            output = string.Concat(output, "LeaderboardId: ", LeaderboardId, ", ");
            output = string.Concat(output, "MaxNumScore: ", MaxNumScore, ", ");
            output = string.Concat(output, "Metadata: ", Metadata, ", ");
            output = string.Concat(output, "NumScore: ", NumScore, ", ");
            output = string.Concat(output, "OwnerId: ", OwnerId, ", ");
            output = string.Concat(output, "Rank: ", Rank, ", ");
            output = string.Concat(output, "Score: ", Score, ", ");
            output = string.Concat(output, "Subscore: ", Subscore, ", ");
            output = string.Concat(output, "UpdateTime: ", UpdateTime, ", ");
            output = string.Concat(output, "Username: ", Username, ", ");
            return output;
        }
    }

    /// <summary>
    /// A set of leaderboard records, may be part of a leaderboard records page or a batch of individual records.
    /// </summary>
    public interface IApiLeaderboardRecordList
    {

        /// <summary>
        /// The cursor to send when retireving the next page, if any.
        /// </summary>
        string NextCursor { get; }

        /// <summary>
        /// A batched set of leaderobard records belonging to specified owners.
        /// </summary>
        IEnumerable<IApiLeaderboardRecord> OwnerRecords { get; }

        /// <summary>
        /// The cursor to send when retrieving the previous page, if any.
        /// </summary>
        string PrevCursor { get; }

        /// <summary>
        /// A list of leaderboard records.
        /// </summary>
        IEnumerable<IApiLeaderboardRecord> Records { get; }
    }

    /// <inheritdoc />
    internal class ApiLeaderboardRecordList : IApiLeaderboardRecordList
    {

        /// <inheritdoc />
        [DataMember(Name="next_cursor")]
        public string NextCursor { get; set; }

        /// <inheritdoc />
        public IEnumerable<IApiLeaderboardRecord> OwnerRecords => _ownerRecords ?? new List<ApiLeaderboardRecord>(0);
        [DataMember(Name="owner_records")]
        public List<ApiLeaderboardRecord> _ownerRecords { get; set; }

        /// <inheritdoc />
        [DataMember(Name="prev_cursor")]
        public string PrevCursor { get; set; }

        /// <inheritdoc />
        public IEnumerable<IApiLeaderboardRecord> Records => _records ?? new List<ApiLeaderboardRecord>(0);
        [DataMember(Name="records")]
        public List<ApiLeaderboardRecord> _records { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "NextCursor: ", NextCursor, ", ");
            output = string.Concat(output, "OwnerRecords: [", string.Join(", ", OwnerRecords), "], ");
            output = string.Concat(output, "PrevCursor: ", PrevCursor, ", ");
            output = string.Concat(output, "Records: [", string.Join(", ", Records), "], ");
            return output;
        }
    }

    /// <summary>
    /// Represents a realtime match.
    /// </summary>
    public interface IApiMatch
    {

        /// <summary>
        /// True if it's an server-managed authoritative match, false otherwise.
        /// </summary>
        bool Authoritative { get; }

        /// <summary>
        /// Match label, if any.
        /// </summary>
        string Label { get; }

        /// <summary>
        /// The ID of the match, can be used to join.
        /// </summary>
        string MatchId { get; }

        /// <summary>
        /// Current number of users in the match.
        /// </summary>
        int Size { get; }
    }

    /// <inheritdoc />
    internal class ApiMatch : IApiMatch
    {

        /// <inheritdoc />
        [DataMember(Name="authoritative")]
        public bool Authoritative { get; set; }

        /// <inheritdoc />
        [DataMember(Name="label")]
        public string Label { get; set; }

        /// <inheritdoc />
        [DataMember(Name="match_id")]
        public string MatchId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="size")]
        public int Size { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Authoritative: ", Authoritative, ", ");
            output = string.Concat(output, "Label: ", Label, ", ");
            output = string.Concat(output, "MatchId: ", MatchId, ", ");
            output = string.Concat(output, "Size: ", Size, ", ");
            return output;
        }
    }

    /// <summary>
    /// A list of realtime matches.
    /// </summary>
    public interface IApiMatchList
    {

        /// <summary>
        /// A number of matches corresponding to a list operation.
        /// </summary>
        IEnumerable<IApiMatch> Matches { get; }
    }

    /// <inheritdoc />
    internal class ApiMatchList : IApiMatchList
    {

        /// <inheritdoc />
        public IEnumerable<IApiMatch> Matches => _matches ?? new List<ApiMatch>(0);
        [DataMember(Name="matches")]
        public List<ApiMatch> _matches { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Matches: [", string.Join(", ", Matches), "], ");
            return output;
        }
    }

    /// <summary>
    /// A notification in the server.
    /// </summary>
    public interface IApiNotification
    {

        /// <summary>
        /// Category code for this notification.
        /// </summary>
        int Code { get; }

        /// <summary>
        /// Content of the notification in JSON.
        /// </summary>
        string Content { get; }

        /// <summary>
        /// The UNIX time when the notification was created.
        /// </summary>
        string CreateTime { get; }

        /// <summary>
        /// ID of the Notification.
        /// </summary>
        string Id { get; }

        /// <summary>
        /// True if this notification was persisted to the database.
        /// </summary>
        bool Persistent { get; }

        /// <summary>
        /// ID of the sender, if a user. Otherwise 'null'.
        /// </summary>
        string SenderId { get; }

        /// <summary>
        /// Subject of the notification.
        /// </summary>
        string Subject { get; }
    }

    /// <inheritdoc />
    internal class ApiNotification : IApiNotification
    {

        /// <inheritdoc />
        [DataMember(Name="code")]
        public int Code { get; set; }

        /// <inheritdoc />
        [DataMember(Name="content")]
        public string Content { get; set; }

        /// <inheritdoc />
        [DataMember(Name="create_time")]
        public string CreateTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="id")]
        public string Id { get; set; }

        /// <inheritdoc />
        [DataMember(Name="persistent")]
        public bool Persistent { get; set; }

        /// <inheritdoc />
        [DataMember(Name="sender_id")]
        public string SenderId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="subject")]
        public string Subject { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Code: ", Code, ", ");
            output = string.Concat(output, "Content: ", Content, ", ");
            output = string.Concat(output, "CreateTime: ", CreateTime, ", ");
            output = string.Concat(output, "Id: ", Id, ", ");
            output = string.Concat(output, "Persistent: ", Persistent, ", ");
            output = string.Concat(output, "SenderId: ", SenderId, ", ");
            output = string.Concat(output, "Subject: ", Subject, ", ");
            return output;
        }
    }

    /// <summary>
    /// A collection of zero or more notifications.
    /// </summary>
    public interface IApiNotificationList
    {

        /// <summary>
        /// Use this cursor to paginate notifications. Cache this to catch up to new notifications.
        /// </summary>
        string CacheableCursor { get; }

        /// <summary>
        /// Collection of notifications.
        /// </summary>
        IEnumerable<IApiNotification> Notifications { get; }
    }

    /// <inheritdoc />
    internal class ApiNotificationList : IApiNotificationList
    {

        /// <inheritdoc />
        [DataMember(Name="cacheable_cursor")]
        public string CacheableCursor { get; set; }

        /// <inheritdoc />
        public IEnumerable<IApiNotification> Notifications => _notifications ?? new List<ApiNotification>(0);
        [DataMember(Name="notifications")]
        public List<ApiNotification> _notifications { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "CacheableCursor: ", CacheableCursor, ", ");
            output = string.Concat(output, "Notifications: [", string.Join(", ", Notifications), "], ");
            return output;
        }
    }

    /// <summary>
    /// Storage objects to get.
    /// </summary>
    public interface IApiReadStorageObjectId
    {

        /// <summary>
        /// The collection which stores the object.
        /// </summary>
        string Collection { get; }

        /// <summary>
        /// The key of the object within the collection.
        /// </summary>
        string Key { get; }

        /// <summary>
        /// The user owner of the object.
        /// </summary>
        string UserId { get; }
    }

    /// <inheritdoc />
    internal class ApiReadStorageObjectId : IApiReadStorageObjectId
    {

        /// <inheritdoc />
        [DataMember(Name="collection")]
        public string Collection { get; set; }

        /// <inheritdoc />
        [DataMember(Name="key")]
        public string Key { get; set; }

        /// <inheritdoc />
        [DataMember(Name="user_id")]
        public string UserId { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Collection: ", Collection, ", ");
            output = string.Concat(output, "Key: ", Key, ", ");
            output = string.Concat(output, "UserId: ", UserId, ", ");
            return output;
        }
    }

    /// <summary>
    /// Batch get storage objects.
    /// </summary>
    public interface IApiReadStorageObjectsRequest
    {

        /// <summary>
        /// Batch of storage objects.
        /// </summary>
        IEnumerable<IApiReadStorageObjectId> ObjectIds { get; }
    }

    /// <inheritdoc />
    internal class ApiReadStorageObjectsRequest : IApiReadStorageObjectsRequest
    {

        /// <inheritdoc />
        public IEnumerable<IApiReadStorageObjectId> ObjectIds => _objectIds ?? new List<ApiReadStorageObjectId>(0);
        [DataMember(Name="object_ids")]
        public List<ApiReadStorageObjectId> _objectIds { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "ObjectIds: [", string.Join(", ", ObjectIds), "], ");
            return output;
        }
    }

    /// <summary>
    /// Execute an Lua function on the server.
    /// </summary>
    public interface IApiRpc
    {

        /// <summary>
        /// The authentication key used when executed as a non-client HTTP request.
        /// </summary>
        string HttpKey { get; }

        /// <summary>
        /// The identifier of the function.
        /// </summary>
        string Id { get; }

        /// <summary>
        /// The payload of the function which must be a JSON object.
        /// </summary>
        string Payload { get; }
    }

    /// <inheritdoc />
    internal class ApiRpc : IApiRpc
    {

        /// <inheritdoc />
        [DataMember(Name="http_key")]
        public string HttpKey { get; set; }

        /// <inheritdoc />
        [DataMember(Name="id")]
        public string Id { get; set; }

        /// <inheritdoc />
        [DataMember(Name="payload")]
        public string Payload { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "HttpKey: ", HttpKey, ", ");
            output = string.Concat(output, "Id: ", Id, ", ");
            output = string.Concat(output, "Payload: ", Payload, ", ");
            return output;
        }
    }

    /// <summary>
    /// A user's session used to authenticate messages.
    /// </summary>
    public interface IApiSession
    {

        /// <summary>
        /// True if the corresponding account was just created, false otherwise.
        /// </summary>
        bool Created { get; }

        /// <summary>
        /// Authentication credentials.
        /// </summary>
        string Token { get; }

        /// <summary>
        /// rUDP specific authentication credentials.
        /// </summary>
        string UdpToken { get; }
    }

    /// <inheritdoc />
    internal class ApiSession : IApiSession
    {

        /// <inheritdoc />
        [DataMember(Name="created")]
        public bool Created { get; set; }

        /// <inheritdoc />
        [DataMember(Name="token")]
        public string Token { get; set; }

        /// <inheritdoc />
        [DataMember(Name="udp_token")]
        public string UdpToken { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Created: ", Created, ", ");
            output = string.Concat(output, "Token: ", Token, ", ");
            output = string.Concat(output, "UdpToken: ", UdpToken, ", ");
            return output;
        }
    }

    /// <summary>
    /// An object within the storage engine.
    /// </summary>
    public interface IApiStorageObject
    {

        /// <summary>
        /// The collection which stores the object.
        /// </summary>
        string Collection { get; }

        /// <summary>
        /// The UNIX time when the object was created.
        /// </summary>
        string CreateTime { get; }

        /// <summary>
        /// The key of the object within the collection.
        /// </summary>
        string Key { get; }

        /// <summary>
        /// The read access permissions for the object.
        /// </summary>
        int PermissionRead { get; }

        /// <summary>
        /// The write access permissions for the object.
        /// </summary>
        int PermissionWrite { get; }

        /// <summary>
        /// The UNIX time when the object was last updated.
        /// </summary>
        string UpdateTime { get; }

        /// <summary>
        /// The user owner of the object.
        /// </summary>
        string UserId { get; }

        /// <summary>
        /// The value of the object.
        /// </summary>
        string Value { get; }

        /// <summary>
        /// The version hash of the object.
        /// </summary>
        string Version { get; }
    }

    /// <inheritdoc />
    internal class ApiStorageObject : IApiStorageObject
    {

        /// <inheritdoc />
        [DataMember(Name="collection")]
        public string Collection { get; set; }

        /// <inheritdoc />
        [DataMember(Name="create_time")]
        public string CreateTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="key")]
        public string Key { get; set; }

        /// <inheritdoc />
        [DataMember(Name="permission_read")]
        public int PermissionRead { get; set; }

        /// <inheritdoc />
        [DataMember(Name="permission_write")]
        public int PermissionWrite { get; set; }

        /// <inheritdoc />
        [DataMember(Name="update_time")]
        public string UpdateTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="user_id")]
        public string UserId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="value")]
        public string Value { get; set; }

        /// <inheritdoc />
        [DataMember(Name="version")]
        public string Version { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Collection: ", Collection, ", ");
            output = string.Concat(output, "CreateTime: ", CreateTime, ", ");
            output = string.Concat(output, "Key: ", Key, ", ");
            output = string.Concat(output, "PermissionRead: ", PermissionRead, ", ");
            output = string.Concat(output, "PermissionWrite: ", PermissionWrite, ", ");
            output = string.Concat(output, "UpdateTime: ", UpdateTime, ", ");
            output = string.Concat(output, "UserId: ", UserId, ", ");
            output = string.Concat(output, "Value: ", Value, ", ");
            output = string.Concat(output, "Version: ", Version, ", ");
            return output;
        }
    }

    /// <summary>
    /// A storage acknowledgement.
    /// </summary>
    public interface IApiStorageObjectAck
    {

        /// <summary>
        /// The collection which stores the object.
        /// </summary>
        string Collection { get; }

        /// <summary>
        /// The key of the object within the collection.
        /// </summary>
        string Key { get; }

        /// <summary>
        /// The owner of the object.
        /// </summary>
        string UserId { get; }

        /// <summary>
        /// The version hash of the object.
        /// </summary>
        string Version { get; }
    }

    /// <inheritdoc />
    internal class ApiStorageObjectAck : IApiStorageObjectAck
    {

        /// <inheritdoc />
        [DataMember(Name="collection")]
        public string Collection { get; set; }

        /// <inheritdoc />
        [DataMember(Name="key")]
        public string Key { get; set; }

        /// <inheritdoc />
        [DataMember(Name="user_id")]
        public string UserId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="version")]
        public string Version { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Collection: ", Collection, ", ");
            output = string.Concat(output, "Key: ", Key, ", ");
            output = string.Concat(output, "UserId: ", UserId, ", ");
            output = string.Concat(output, "Version: ", Version, ", ");
            return output;
        }
    }

    /// <summary>
    /// Batch of acknowledgements for the storage object write.
    /// </summary>
    public interface IApiStorageObjectAcks
    {

        /// <summary>
        /// Batch of storage write acknowledgements.
        /// </summary>
        IEnumerable<IApiStorageObjectAck> Acks { get; }
    }

    /// <inheritdoc />
    internal class ApiStorageObjectAcks : IApiStorageObjectAcks
    {

        /// <inheritdoc />
        public IEnumerable<IApiStorageObjectAck> Acks => _acks ?? new List<ApiStorageObjectAck>(0);
        [DataMember(Name="acks")]
        public List<ApiStorageObjectAck> _acks { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Acks: [", string.Join(", ", Acks), "], ");
            return output;
        }
    }

    /// <summary>
    /// List of storage objects.
    /// </summary>
    public interface IApiStorageObjectList
    {

        /// <summary>
        /// The cursor associated with the query a page of results.
        /// </summary>
        string Cursor { get; }

        /// <summary>
        /// The list of storage objects.
        /// </summary>
        IEnumerable<IApiStorageObject> Objects { get; }
    }

    /// <inheritdoc />
    internal class ApiStorageObjectList : IApiStorageObjectList
    {

        /// <inheritdoc />
        [DataMember(Name="cursor")]
        public string Cursor { get; set; }

        /// <inheritdoc />
        public IEnumerable<IApiStorageObject> Objects => _objects ?? new List<ApiStorageObject>(0);
        [DataMember(Name="objects")]
        public List<ApiStorageObject> _objects { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Cursor: ", Cursor, ", ");
            output = string.Concat(output, "Objects: [", string.Join(", ", Objects), "], ");
            return output;
        }
    }

    /// <summary>
    /// Batch of storage objects.
    /// </summary>
    public interface IApiStorageObjects
    {

        /// <summary>
        /// The batch of storage objects.
        /// </summary>
        IEnumerable<IApiStorageObject> Objects { get; }
    }

    /// <inheritdoc />
    internal class ApiStorageObjects : IApiStorageObjects
    {

        /// <inheritdoc />
        public IEnumerable<IApiStorageObject> Objects => _objects ?? new List<ApiStorageObject>(0);
        [DataMember(Name="objects")]
        public List<ApiStorageObject> _objects { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Objects: [", string.Join(", ", Objects), "], ");
            return output;
        }
    }

    /// <summary>
    /// A tournament on the server.
    /// </summary>
    public interface IApiTournament
    {

        /// <summary>
        /// True if the tournament is active and can enter. A computed value.
        /// </summary>
        bool CanEnter { get; }

        /// <summary>
        /// The category of the tournament. e.g. "vip" could be category 1.
        /// </summary>
        int Category { get; }

        /// <summary>
        /// The UNIX time when the tournament was created.
        /// </summary>
        string CreateTime { get; }

        /// <summary>
        /// The description of the tournament. May be blank.
        /// </summary>
        string Description { get; }

        /// <summary>
        /// The UNIX timestamp for duration of a tournament.
        /// </summary>
        int Duration { get; }

        /// <summary>
        /// The UNIX timestamp when the tournament stops being active until next reset. A computed value.
        /// </summary>
        int EndActive { get; }

        /// <summary>
        /// The UNIX time when the tournament will be stopped.
        /// </summary>
        string EndTime { get; }

        /// <summary>
        /// The ID of the tournament.
        /// </summary>
        string Id { get; }

        /// <summary>
        /// The maximum score updates allowed per player for the current tournament.
        /// </summary>
        int MaxNumScore { get; }

        /// <summary>
        /// The maximum number of players for the tournament.
        /// </summary>
        int MaxSize { get; }

        /// <summary>
        /// Additional information stored as a JSON object.
        /// </summary>
        string Metadata { get; }

        /// <summary>
        /// The UNIX timestamp when the tournament is next playable. A computed value.
        /// </summary>
        int NextReset { get; }

        /// <summary>
        /// The current number of players in the tournament.
        /// </summary>
        int Size { get; }

        /// <summary>
        /// ASC or DESC sort mode of scores in the tournament.
        /// </summary>
        int SortOrder { get; }

        /// <summary>
        /// The UNIX time when the tournament will start.
        /// </summary>
        string StartTime { get; }

        /// <summary>
        /// The title for the tournament.
        /// </summary>
        string Title { get; }
    }

    /// <inheritdoc />
    internal class ApiTournament : IApiTournament
    {

        /// <inheritdoc />
        [DataMember(Name="can_enter")]
        public bool CanEnter { get; set; }

        /// <inheritdoc />
        [DataMember(Name="category")]
        public int Category { get; set; }

        /// <inheritdoc />
        [DataMember(Name="create_time")]
        public string CreateTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="description")]
        public string Description { get; set; }

        /// <inheritdoc />
        [DataMember(Name="duration")]
        public int Duration { get; set; }

        /// <inheritdoc />
        [DataMember(Name="end_active")]
        public int EndActive { get; set; }

        /// <inheritdoc />
        [DataMember(Name="end_time")]
        public string EndTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="id")]
        public string Id { get; set; }

        /// <inheritdoc />
        [DataMember(Name="max_num_score")]
        public int MaxNumScore { get; set; }

        /// <inheritdoc />
        [DataMember(Name="max_size")]
        public int MaxSize { get; set; }

        /// <inheritdoc />
        [DataMember(Name="metadata")]
        public string Metadata { get; set; }

        /// <inheritdoc />
        [DataMember(Name="next_reset")]
        public int NextReset { get; set; }

        /// <inheritdoc />
        [DataMember(Name="size")]
        public int Size { get; set; }

        /// <inheritdoc />
        [DataMember(Name="sort_order")]
        public int SortOrder { get; set; }

        /// <inheritdoc />
        [DataMember(Name="start_time")]
        public string StartTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="title")]
        public string Title { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "CanEnter: ", CanEnter, ", ");
            output = string.Concat(output, "Category: ", Category, ", ");
            output = string.Concat(output, "CreateTime: ", CreateTime, ", ");
            output = string.Concat(output, "Description: ", Description, ", ");
            output = string.Concat(output, "Duration: ", Duration, ", ");
            output = string.Concat(output, "EndActive: ", EndActive, ", ");
            output = string.Concat(output, "EndTime: ", EndTime, ", ");
            output = string.Concat(output, "Id: ", Id, ", ");
            output = string.Concat(output, "MaxNumScore: ", MaxNumScore, ", ");
            output = string.Concat(output, "MaxSize: ", MaxSize, ", ");
            output = string.Concat(output, "Metadata: ", Metadata, ", ");
            output = string.Concat(output, "NextReset: ", NextReset, ", ");
            output = string.Concat(output, "Size: ", Size, ", ");
            output = string.Concat(output, "SortOrder: ", SortOrder, ", ");
            output = string.Concat(output, "StartTime: ", StartTime, ", ");
            output = string.Concat(output, "Title: ", Title, ", ");
            return output;
        }
    }

    /// <summary>
    /// A list of tournaments.
    /// </summary>
    public interface IApiTournamentList
    {

        /// <summary>
        /// A pagination cursor (optional).
        /// </summary>
        string Cursor { get; }

        /// <summary>
        /// The list of tournaments returned.
        /// </summary>
        IEnumerable<IApiTournament> Tournaments { get; }
    }

    /// <inheritdoc />
    internal class ApiTournamentList : IApiTournamentList
    {

        /// <inheritdoc />
        [DataMember(Name="cursor")]
        public string Cursor { get; set; }

        /// <inheritdoc />
        public IEnumerable<IApiTournament> Tournaments => _tournaments ?? new List<ApiTournament>(0);
        [DataMember(Name="tournaments")]
        public List<ApiTournament> _tournaments { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Cursor: ", Cursor, ", ");
            output = string.Concat(output, "Tournaments: [", string.Join(", ", Tournaments), "], ");
            return output;
        }
    }

    /// <summary>
    /// A set of tournament records which may be part of a tournament records page or a batch of individual records.
    /// </summary>
    public interface IApiTournamentRecordList
    {

        /// <summary>
        /// The cursor to send when retireving the next page (optional).
        /// </summary>
        string NextCursor { get; }

        /// <summary>
        /// A batched set of tournament records belonging to specified owners.
        /// </summary>
        IEnumerable<IApiLeaderboardRecord> OwnerRecords { get; }

        /// <summary>
        /// The cursor to send when retrieving the previous page (optional).
        /// </summary>
        string PrevCursor { get; }

        /// <summary>
        /// A list of tournament records.
        /// </summary>
        IEnumerable<IApiLeaderboardRecord> Records { get; }
    }

    /// <inheritdoc />
    internal class ApiTournamentRecordList : IApiTournamentRecordList
    {

        /// <inheritdoc />
        [DataMember(Name="next_cursor")]
        public string NextCursor { get; set; }

        /// <inheritdoc />
        public IEnumerable<IApiLeaderboardRecord> OwnerRecords => _ownerRecords ?? new List<ApiLeaderboardRecord>(0);
        [DataMember(Name="owner_records")]
        public List<ApiLeaderboardRecord> _ownerRecords { get; set; }

        /// <inheritdoc />
        [DataMember(Name="prev_cursor")]
        public string PrevCursor { get; set; }

        /// <inheritdoc />
        public IEnumerable<IApiLeaderboardRecord> Records => _records ?? new List<ApiLeaderboardRecord>(0);
        [DataMember(Name="records")]
        public List<ApiLeaderboardRecord> _records { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "NextCursor: ", NextCursor, ", ");
            output = string.Concat(output, "OwnerRecords: [", string.Join(", ", OwnerRecords), "], ");
            output = string.Concat(output, "PrevCursor: ", PrevCursor, ", ");
            output = string.Concat(output, "Records: [", string.Join(", ", Records), "], ");
            return output;
        }
    }

    /// <summary>
    /// Update a user's account details.
    /// </summary>
    public interface IApiUpdateAccountRequest
    {

        /// <summary>
        /// A URL for an avatar image.
        /// </summary>
        string AvatarUrl { get; }

        /// <summary>
        /// The display name of the user.
        /// </summary>
        string DisplayName { get; }

        /// <summary>
        /// The language expected to be a tag which follows the BCP-47 spec.
        /// </summary>
        string LangTag { get; }

        /// <summary>
        /// The location set by the user.
        /// </summary>
        string Location { get; }

        /// <summary>
        /// The timezone set by the user.
        /// </summary>
        string Timezone { get; }

        /// <summary>
        /// The username of the user's account.
        /// </summary>
        string Username { get; }
    }

    /// <inheritdoc />
    internal class ApiUpdateAccountRequest : IApiUpdateAccountRequest
    {

        /// <inheritdoc />
        [DataMember(Name="avatar_url")]
        public string AvatarUrl { get; set; }

        /// <inheritdoc />
        [DataMember(Name="display_name")]
        public string DisplayName { get; set; }

        /// <inheritdoc />
        [DataMember(Name="lang_tag")]
        public string LangTag { get; set; }

        /// <inheritdoc />
        [DataMember(Name="location")]
        public string Location { get; set; }

        /// <inheritdoc />
        [DataMember(Name="timezone")]
        public string Timezone { get; set; }

        /// <inheritdoc />
        [DataMember(Name="username")]
        public string Username { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "AvatarUrl: ", AvatarUrl, ", ");
            output = string.Concat(output, "DisplayName: ", DisplayName, ", ");
            output = string.Concat(output, "LangTag: ", LangTag, ", ");
            output = string.Concat(output, "Location: ", Location, ", ");
            output = string.Concat(output, "Timezone: ", Timezone, ", ");
            output = string.Concat(output, "Username: ", Username, ", ");
            return output;
        }
    }

    /// <summary>
    /// Update fields in a given group.
    /// </summary>
    public interface IApiUpdateGroupRequest
    {

        /// <summary>
        /// Avatar URL.
        /// </summary>
        string AvatarUrl { get; }

        /// <summary>
        /// Description string.
        /// </summary>
        string Description { get; }

        /// <summary>
        /// The ID of the group to update.
        /// </summary>
        string GroupId { get; }

        /// <summary>
        /// Lang tag.
        /// </summary>
        string LangTag { get; }

        /// <summary>
        /// Name.
        /// </summary>
        string Name { get; }

        /// <summary>
        /// Open is true if anyone should be allowed to join, or false if joins must be approved by a group admin.
        /// </summary>
        bool Open { get; }
    }

    /// <inheritdoc />
    internal class ApiUpdateGroupRequest : IApiUpdateGroupRequest
    {

        /// <inheritdoc />
        [DataMember(Name="avatar_url")]
        public string AvatarUrl { get; set; }

        /// <inheritdoc />
        [DataMember(Name="description")]
        public string Description { get; set; }

        /// <inheritdoc />
        [DataMember(Name="group_id")]
        public string GroupId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="lang_tag")]
        public string LangTag { get; set; }

        /// <inheritdoc />
        [DataMember(Name="name")]
        public string Name { get; set; }

        /// <inheritdoc />
        [DataMember(Name="open")]
        public bool Open { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "AvatarUrl: ", AvatarUrl, ", ");
            output = string.Concat(output, "Description: ", Description, ", ");
            output = string.Concat(output, "GroupId: ", GroupId, ", ");
            output = string.Concat(output, "LangTag: ", LangTag, ", ");
            output = string.Concat(output, "Name: ", Name, ", ");
            output = string.Concat(output, "Open: ", Open, ", ");
            return output;
        }
    }

    /// <summary>
    /// A user in the server.
    /// </summary>
    public interface IApiUser
    {

        /// <summary>
        /// A URL for an avatar image.
        /// </summary>
        string AvatarUrl { get; }

        /// <summary>
        /// The UNIX time when the user was created.
        /// </summary>
        string CreateTime { get; }

        /// <summary>
        /// The display name of the user.
        /// </summary>
        string DisplayName { get; }

        /// <summary>
        /// Number of related edges to this user.
        /// </summary>
        int EdgeCount { get; }

        /// <summary>
        /// The Facebook id in the user's account.
        /// </summary>
        string FacebookId { get; }

        /// <summary>
        /// The Apple Game Center in of the user's account.
        /// </summary>
        string GamecenterId { get; }

        /// <summary>
        /// The Google id in the user's account.
        /// </summary>
        string GoogleId { get; }

        /// <summary>
        /// The id of the user's account.
        /// </summary>
        string Id { get; }

        /// <summary>
        /// The language expected to be a tag which follows the BCP-47 spec.
        /// </summary>
        string LangTag { get; }

        /// <summary>
        /// The location set by the user.
        /// </summary>
        string Location { get; }

        /// <summary>
        /// Additional information stored as a JSON object.
        /// </summary>
        string Metadata { get; }

        /// <summary>
        /// Indicates whether the user is currently online.
        /// </summary>
        bool Online { get; }

        /// <summary>
        /// The Steam id in the user's account.
        /// </summary>
        string SteamId { get; }

        /// <summary>
        /// The timezone set by the user.
        /// </summary>
        string Timezone { get; }

        /// <summary>
        /// The UNIX time when the user was last updated.
        /// </summary>
        string UpdateTime { get; }

        /// <summary>
        /// The username of the user's account.
        /// </summary>
        string Username { get; }
    }

    /// <inheritdoc />
    internal class ApiUser : IApiUser
    {

        /// <inheritdoc />
        [DataMember(Name="avatar_url")]
        public string AvatarUrl { get; set; }

        /// <inheritdoc />
        [DataMember(Name="create_time")]
        public string CreateTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="display_name")]
        public string DisplayName { get; set; }

        /// <inheritdoc />
        [DataMember(Name="edge_count")]
        public int EdgeCount { get; set; }

        /// <inheritdoc />
        [DataMember(Name="facebook_id")]
        public string FacebookId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="gamecenter_id")]
        public string GamecenterId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="google_id")]
        public string GoogleId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="id")]
        public string Id { get; set; }

        /// <inheritdoc />
        [DataMember(Name="lang_tag")]
        public string LangTag { get; set; }

        /// <inheritdoc />
        [DataMember(Name="location")]
        public string Location { get; set; }

        /// <inheritdoc />
        [DataMember(Name="metadata")]
        public string Metadata { get; set; }

        /// <inheritdoc />
        [DataMember(Name="online")]
        public bool Online { get; set; }

        /// <inheritdoc />
        [DataMember(Name="steam_id")]
        public string SteamId { get; set; }

        /// <inheritdoc />
        [DataMember(Name="timezone")]
        public string Timezone { get; set; }

        /// <inheritdoc />
        [DataMember(Name="update_time")]
        public string UpdateTime { get; set; }

        /// <inheritdoc />
        [DataMember(Name="username")]
        public string Username { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "AvatarUrl: ", AvatarUrl, ", ");
            output = string.Concat(output, "CreateTime: ", CreateTime, ", ");
            output = string.Concat(output, "DisplayName: ", DisplayName, ", ");
            output = string.Concat(output, "EdgeCount: ", EdgeCount, ", ");
            output = string.Concat(output, "FacebookId: ", FacebookId, ", ");
            output = string.Concat(output, "GamecenterId: ", GamecenterId, ", ");
            output = string.Concat(output, "GoogleId: ", GoogleId, ", ");
            output = string.Concat(output, "Id: ", Id, ", ");
            output = string.Concat(output, "LangTag: ", LangTag, ", ");
            output = string.Concat(output, "Location: ", Location, ", ");
            output = string.Concat(output, "Metadata: ", Metadata, ", ");
            output = string.Concat(output, "Online: ", Online, ", ");
            output = string.Concat(output, "SteamId: ", SteamId, ", ");
            output = string.Concat(output, "Timezone: ", Timezone, ", ");
            output = string.Concat(output, "UpdateTime: ", UpdateTime, ", ");
            output = string.Concat(output, "Username: ", Username, ", ");
            return output;
        }
    }

    /// <summary>
    /// A list of groups belonging to a user, along with the user's role in each group.
    /// </summary>
    public interface IApiUserGroupList
    {

        /// <summary>
        /// Group-role pairs for a user.
        /// </summary>
        IEnumerable<IUserGroupListUserGroup> UserGroups { get; }
    }

    /// <inheritdoc />
    internal class ApiUserGroupList : IApiUserGroupList
    {

        /// <inheritdoc />
        public IEnumerable<IUserGroupListUserGroup> UserGroups => _userGroups ?? new List<UserGroupListUserGroup>(0);
        [DataMember(Name="user_groups")]
        public List<UserGroupListUserGroup> _userGroups { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "UserGroups: [", string.Join(", ", UserGroups), "], ");
            return output;
        }
    }

    /// <summary>
    /// A collection of zero or more users.
    /// </summary>
    public interface IApiUsers
    {

        /// <summary>
        /// The User objects.
        /// </summary>
        IEnumerable<IApiUser> Users { get; }
    }

    /// <inheritdoc />
    internal class ApiUsers : IApiUsers
    {

        /// <inheritdoc />
        public IEnumerable<IApiUser> Users => _users ?? new List<ApiUser>(0);
        [DataMember(Name="users")]
        public List<ApiUser> _users { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Users: [", string.Join(", ", Users), "], ");
            return output;
        }
    }

    /// <summary>
    /// The object to store.
    /// </summary>
    public interface IApiWriteStorageObject
    {

        /// <summary>
        /// The collection to store the object.
        /// </summary>
        string Collection { get; }

        /// <summary>
        /// The key for the object within the collection.
        /// </summary>
        string Key { get; }

        /// <summary>
        /// The read access permissions for the object.
        /// </summary>
        int PermissionRead { get; }

        /// <summary>
        /// The write access permissions for the object.
        /// </summary>
        int PermissionWrite { get; }

        /// <summary>
        /// The value of the object.
        /// </summary>
        string Value { get; }

        /// <summary>
        /// The version hash of the object to check. Possible values are: ["", "*", "#hash#"].
        /// </summary>
        string Version { get; }
    }

    /// <inheritdoc />
    internal class ApiWriteStorageObject : IApiWriteStorageObject
    {

        /// <inheritdoc />
        [DataMember(Name="collection")]
        public string Collection { get; set; }

        /// <inheritdoc />
        [DataMember(Name="key")]
        public string Key { get; set; }

        /// <inheritdoc />
        [DataMember(Name="permission_read")]
        public int PermissionRead { get; set; }

        /// <inheritdoc />
        [DataMember(Name="permission_write")]
        public int PermissionWrite { get; set; }

        /// <inheritdoc />
        [DataMember(Name="value")]
        public string Value { get; set; }

        /// <inheritdoc />
        [DataMember(Name="version")]
        public string Version { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Collection: ", Collection, ", ");
            output = string.Concat(output, "Key: ", Key, ", ");
            output = string.Concat(output, "PermissionRead: ", PermissionRead, ", ");
            output = string.Concat(output, "PermissionWrite: ", PermissionWrite, ", ");
            output = string.Concat(output, "Value: ", Value, ", ");
            output = string.Concat(output, "Version: ", Version, ", ");
            return output;
        }
    }

    /// <summary>
    /// Write objects to the storage engine.
    /// </summary>
    public interface IApiWriteStorageObjectsRequest
    {

        /// <summary>
        /// The objects to store on the server.
        /// </summary>
        IEnumerable<IApiWriteStorageObject> Objects { get; }
    }

    /// <inheritdoc />
    internal class ApiWriteStorageObjectsRequest : IApiWriteStorageObjectsRequest
    {

        /// <inheritdoc />
        public IEnumerable<IApiWriteStorageObject> Objects => _objects ?? new List<ApiWriteStorageObject>(0);
        [DataMember(Name="objects")]
        public List<ApiWriteStorageObject> _objects { get; set; }

        public override string ToString()
        {
            var output = "";
            output = string.Concat(output, "Objects: [", string.Join(", ", Objects), "], ");
            return output;
        }
    }

    /// <summary>
    /// service Foo {       rpc Bar(google.protobuf.Empty) returns (google.protobuf.Empty);     }  The JSON representation for `Empty` is empty JSON object `{}`.
    /// </summary>
    public interface IProtobufEmpty
    {
    }

    /// <inheritdoc />
    internal class ProtobufEmpty : IProtobufEmpty
    {

        public override string ToString()
        {
            var output = "";
            return output;
        }
    }

    /// <summary>
    /// The low level client for the Nakama API.
    /// </summary>
    internal class ApiClient
    {
        private readonly Uri _baseUri;
        private readonly HttpClient _httpClient;

        public ApiClient(Uri baseUri, HttpClient httpClient)
        {
            _baseUri = baseUri;
            _httpClient = httpClient;
        }

        /// <summary>
        /// A healthcheck which load balancers can use to check the service.
        /// </summary>
        public async Task<IProtobufEmpty> HealthcheckAsync(
            string bearerToken)
        {

            var urlpath = "/healthcheck?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Fetch the current user's account.
        /// </summary>
        public async Task<IApiAccount> GetAccountAsync(
            string bearerToken)
        {

            var urlpath = "/v2/account?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiAccount>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Update fields in the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> UpdateAccountAsync(
            string bearerToken
            , ApiUpdateAccountRequest body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("PUT"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Authenticate a user with a custom id against the server.
        /// </summary>
        public async Task<IApiSession> AuthenticateCustomAsync(
            string basicAuthUsername
            , string basicAuthPassword
            , ApiAccountCustom body
            , bool create
            , string username)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/authenticate/custom?";
            urlpath = string.Concat(urlpath, "create=", create.ToString().ToLower(), "&");
            if (username != null)
            {
                urlpath = string.Concat(urlpath, "username=", Uri.EscapeDataString(username), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var credentials = Encoding.UTF8.GetBytes(basicAuthUsername + ":" + basicAuthPassword);
            var header = string.Concat("Basic ", Convert.ToBase64String(credentials));
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiSession>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Authenticate a user with a device id against the server.
        /// </summary>
        public async Task<IApiSession> AuthenticateDeviceAsync(
            string basicAuthUsername
            , string basicAuthPassword
            , ApiAccountDevice body
            , bool create
            , string username)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/authenticate/device?";
            urlpath = string.Concat(urlpath, "create=", create.ToString().ToLower(), "&");
            if (username != null)
            {
                urlpath = string.Concat(urlpath, "username=", Uri.EscapeDataString(username), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var credentials = Encoding.UTF8.GetBytes(basicAuthUsername + ":" + basicAuthPassword);
            var header = string.Concat("Basic ", Convert.ToBase64String(credentials));
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiSession>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Authenticate a user with an email+password against the server.
        /// </summary>
        public async Task<IApiSession> AuthenticateEmailAsync(
            string basicAuthUsername
            , string basicAuthPassword
            , ApiAccountEmail body
            , bool create
            , string username)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/authenticate/email?";
            urlpath = string.Concat(urlpath, "create=", create.ToString().ToLower(), "&");
            if (username != null)
            {
                urlpath = string.Concat(urlpath, "username=", Uri.EscapeDataString(username), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var credentials = Encoding.UTF8.GetBytes(basicAuthUsername + ":" + basicAuthPassword);
            var header = string.Concat("Basic ", Convert.ToBase64String(credentials));
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiSession>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Authenticate a user with a Facebook OAuth token against the server.
        /// </summary>
        public async Task<IApiSession> AuthenticateFacebookAsync(
            string basicAuthUsername
            , string basicAuthPassword
            , ApiAccountFacebook body
            , bool create
            , string username
            , bool import)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/authenticate/facebook?";
            urlpath = string.Concat(urlpath, "create=", create.ToString().ToLower(), "&");
            if (username != null)
            {
                urlpath = string.Concat(urlpath, "username=", Uri.EscapeDataString(username), "&");
            }
            urlpath = string.Concat(urlpath, "import=", import.ToString().ToLower(), "&");

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var credentials = Encoding.UTF8.GetBytes(basicAuthUsername + ":" + basicAuthPassword);
            var header = string.Concat("Basic ", Convert.ToBase64String(credentials));
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiSession>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Authenticate a user with Apple's GameCenter against the server.
        /// </summary>
        public async Task<IApiSession> AuthenticateGameCenterAsync(
            string basicAuthUsername
            , string basicAuthPassword
            , ApiAccountGameCenter body
            , bool create
            , string username)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/authenticate/gamecenter?";
            urlpath = string.Concat(urlpath, "create=", create.ToString().ToLower(), "&");
            if (username != null)
            {
                urlpath = string.Concat(urlpath, "username=", Uri.EscapeDataString(username), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var credentials = Encoding.UTF8.GetBytes(basicAuthUsername + ":" + basicAuthPassword);
            var header = string.Concat("Basic ", Convert.ToBase64String(credentials));
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiSession>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Authenticate a user with Google against the server.
        /// </summary>
        public async Task<IApiSession> AuthenticateGoogleAsync(
            string basicAuthUsername
            , string basicAuthPassword
            , ApiAccountGoogle body
            , bool create
            , string username)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/authenticate/google?";
            urlpath = string.Concat(urlpath, "create=", create.ToString().ToLower(), "&");
            if (username != null)
            {
                urlpath = string.Concat(urlpath, "username=", Uri.EscapeDataString(username), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var credentials = Encoding.UTF8.GetBytes(basicAuthUsername + ":" + basicAuthPassword);
            var header = string.Concat("Basic ", Convert.ToBase64String(credentials));
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiSession>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Authenticate a user with Steam against the server.
        /// </summary>
        public async Task<IApiSession> AuthenticateSteamAsync(
            string basicAuthUsername
            , string basicAuthPassword
            , ApiAccountSteam body
            , bool create
            , string username)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/authenticate/steam?";
            urlpath = string.Concat(urlpath, "create=", create.ToString().ToLower(), "&");
            if (username != null)
            {
                urlpath = string.Concat(urlpath, "username=", Uri.EscapeDataString(username), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var credentials = Encoding.UTF8.GetBytes(basicAuthUsername + ":" + basicAuthPassword);
            var header = string.Concat("Basic ", Convert.ToBase64String(credentials));
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiSession>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Add a custom ID to the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> LinkCustomAsync(
            string bearerToken
            , ApiAccountCustom body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/link/custom?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Add a device ID to the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> LinkDeviceAsync(
            string bearerToken
            , ApiAccountDevice body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/link/device?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Add an email+password to the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> LinkEmailAsync(
            string bearerToken
            , ApiAccountEmail body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/link/email?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Add Facebook to the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> LinkFacebookAsync(
            string bearerToken
            , ApiAccountFacebook body
            , bool import)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/link/facebook?";
            urlpath = string.Concat(urlpath, "import=", import.ToString().ToLower(), "&");

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Add Apple's GameCenter to the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> LinkGameCenterAsync(
            string bearerToken
            , ApiAccountGameCenter body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/link/gamecenter?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Add Google to the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> LinkGoogleAsync(
            string bearerToken
            , ApiAccountGoogle body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/link/google?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Add Steam to the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> LinkSteamAsync(
            string bearerToken
            , ApiAccountSteam body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/link/steam?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Remove the custom ID from the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> UnlinkCustomAsync(
            string bearerToken
            , ApiAccountCustom body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/unlink/custom?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Remove the device ID from the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> UnlinkDeviceAsync(
            string bearerToken
            , ApiAccountDevice body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/unlink/device?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Remove the email+password from the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> UnlinkEmailAsync(
            string bearerToken
            , ApiAccountEmail body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/unlink/email?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Remove Facebook from the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> UnlinkFacebookAsync(
            string bearerToken
            , ApiAccountFacebook body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/unlink/facebook?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Remove Apple's GameCenter from the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> UnlinkGameCenterAsync(
            string bearerToken
            , ApiAccountGameCenter body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/unlink/gamecenter?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Remove Google from the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> UnlinkGoogleAsync(
            string bearerToken
            , ApiAccountGoogle body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/unlink/google?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Remove Steam from the social profiles on the current user's account.
        /// </summary>
        public async Task<IProtobufEmpty> UnlinkSteamAsync(
            string bearerToken
            , ApiAccountSteam body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/account/unlink/steam?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// List a channel's message history.
        /// </summary>
        public async Task<IApiChannelMessageList> ListChannelMessagesAsync(
            string bearerToken
            , string channelId
            , int limit
            , bool forward
            , string cursor)
        {
            if (channelId == null)
            {
                throw new ArgumentException("'channelId' is required but was null.");
            }

            var urlpath = "/v2/channel/{channel_id}?";
            urlpath = urlpath.Replace("{channel_id}", Uri.EscapeDataString(channelId));
            urlpath = string.Concat(urlpath, "limit=", limit, "&");
            urlpath = string.Concat(urlpath, "forward=", forward.ToString().ToLower(), "&");
            if (cursor != null)
            {
                urlpath = string.Concat(urlpath, "cursor=", Uri.EscapeDataString(cursor), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiChannelMessageList>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Delete one or more users by ID or username.
        /// </summary>
        public async Task<IProtobufEmpty> DeleteFriendsAsync(
            string bearerToken
            , IEnumerable<string> ids
            , IEnumerable<string> usernames)
        {

            var urlpath = "/v2/friend?";
            foreach (var elem in ids ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "ids=", elem, "&");
            }
            foreach (var elem in usernames ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "usernames=", elem, "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("DELETE"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// List all friends for the current user.
        /// </summary>
        public async Task<IApiFriends> ListFriendsAsync(
            string bearerToken)
        {

            var urlpath = "/v2/friend?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiFriends>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Add friends by ID or username to a user's account.
        /// </summary>
        public async Task<IProtobufEmpty> AddFriendsAsync(
            string bearerToken
            , IEnumerable<string> ids
            , IEnumerable<string> usernames)
        {

            var urlpath = "/v2/friend?";
            foreach (var elem in ids ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "ids=", elem, "&");
            }
            foreach (var elem in usernames ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "usernames=", elem, "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Block one or more users by ID or username.
        /// </summary>
        public async Task<IProtobufEmpty> BlockFriendsAsync(
            string bearerToken
            , IEnumerable<string> ids
            , IEnumerable<string> usernames)
        {

            var urlpath = "/v2/friend/block?";
            foreach (var elem in ids ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "ids=", elem, "&");
            }
            foreach (var elem in usernames ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "usernames=", elem, "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Import Facebook friends and add them to a user's account.
        /// </summary>
        public async Task<IProtobufEmpty> ImportFacebookFriendsAsync(
            string bearerToken
            , ApiAccountFacebook body
            , bool reset)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/friend/facebook?";
            urlpath = string.Concat(urlpath, "reset=", reset.ToString().ToLower(), "&");

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// List groups based on given filters.
        /// </summary>
        public async Task<IApiGroupList> ListGroupsAsync(
            string bearerToken
            , string name
            , string cursor
            , int limit)
        {

            var urlpath = "/v2/group?";
            if (name != null)
            {
                urlpath = string.Concat(urlpath, "name=", Uri.EscapeDataString(name), "&");
            }
            if (cursor != null)
            {
                urlpath = string.Concat(urlpath, "cursor=", Uri.EscapeDataString(cursor), "&");
            }
            urlpath = string.Concat(urlpath, "limit=", limit, "&");

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiGroupList>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Create a new group with the current user as the owner.
        /// </summary>
        public async Task<IApiGroup> CreateGroupAsync(
            string bearerToken
            , ApiCreateGroupRequest body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/group?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiGroup>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Delete a group by ID.
        /// </summary>
        public async Task<IProtobufEmpty> DeleteGroupAsync(
            string bearerToken
            , string groupId)
        {
            if (groupId == null)
            {
                throw new ArgumentException("'groupId' is required but was null.");
            }

            var urlpath = "/v2/group/{group_id}?";
            urlpath = urlpath.Replace("{group_id}", Uri.EscapeDataString(groupId));

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("DELETE"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Update fields in a given group.
        /// </summary>
        public async Task<IProtobufEmpty> UpdateGroupAsync(
            string bearerToken
            , string groupId
            , ApiUpdateGroupRequest body)
        {
            if (groupId == null)
            {
                throw new ArgumentException("'groupId' is required but was null.");
            }
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/group/{group_id}?";
            urlpath = urlpath.Replace("{group_id}", Uri.EscapeDataString(groupId));

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("PUT"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Add users to a group.
        /// </summary>
        public async Task<IProtobufEmpty> AddGroupUsersAsync(
            string bearerToken
            , string groupId
            , IEnumerable<string> userIds)
        {
            if (groupId == null)
            {
                throw new ArgumentException("'groupId' is required but was null.");
            }

            var urlpath = "/v2/group/{group_id}/add?";
            urlpath = urlpath.Replace("{group_id}", Uri.EscapeDataString(groupId));
            foreach (var elem in userIds ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "user_ids=", elem, "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Immediately join an open group, or request to join a closed one.
        /// </summary>
        public async Task<IProtobufEmpty> JoinGroupAsync(
            string bearerToken
            , string groupId)
        {
            if (groupId == null)
            {
                throw new ArgumentException("'groupId' is required but was null.");
            }

            var urlpath = "/v2/group/{group_id}/join?";
            urlpath = urlpath.Replace("{group_id}", Uri.EscapeDataString(groupId));

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Kick a set of users from a group.
        /// </summary>
        public async Task<IProtobufEmpty> KickGroupUsersAsync(
            string bearerToken
            , string groupId
            , IEnumerable<string> userIds)
        {
            if (groupId == null)
            {
                throw new ArgumentException("'groupId' is required but was null.");
            }

            var urlpath = "/v2/group/{group_id}/kick?";
            urlpath = urlpath.Replace("{group_id}", Uri.EscapeDataString(groupId));
            foreach (var elem in userIds ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "user_ids=", elem, "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Leave a group the user is a member of.
        /// </summary>
        public async Task<IProtobufEmpty> LeaveGroupAsync(
            string bearerToken
            , string groupId)
        {
            if (groupId == null)
            {
                throw new ArgumentException("'groupId' is required but was null.");
            }

            var urlpath = "/v2/group/{group_id}/leave?";
            urlpath = urlpath.Replace("{group_id}", Uri.EscapeDataString(groupId));

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Promote a set of users in a group to the next role up.
        /// </summary>
        public async Task<IProtobufEmpty> PromoteGroupUsersAsync(
            string bearerToken
            , string groupId
            , IEnumerable<string> userIds)
        {
            if (groupId == null)
            {
                throw new ArgumentException("'groupId' is required but was null.");
            }

            var urlpath = "/v2/group/{group_id}/promote?";
            urlpath = urlpath.Replace("{group_id}", Uri.EscapeDataString(groupId));
            foreach (var elem in userIds ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "user_ids=", elem, "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// List all users that are part of a group.
        /// </summary>
        public async Task<IApiGroupUserList> ListGroupUsersAsync(
            string bearerToken
            , string groupId)
        {
            if (groupId == null)
            {
                throw new ArgumentException("'groupId' is required but was null.");
            }

            var urlpath = "/v2/group/{group_id}/user?";
            urlpath = urlpath.Replace("{group_id}", Uri.EscapeDataString(groupId));

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiGroupUserList>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Delete a leaderboard record.
        /// </summary>
        public async Task<IProtobufEmpty> DeleteLeaderboardRecordAsync(
            string bearerToken
            , string leaderboardId)
        {
            if (leaderboardId == null)
            {
                throw new ArgumentException("'leaderboardId' is required but was null.");
            }

            var urlpath = "/v2/leaderboard/{leaderboard_id}?";
            urlpath = urlpath.Replace("{leaderboard_id}", Uri.EscapeDataString(leaderboardId));

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("DELETE"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// List leaderboard records
        /// </summary>
        public async Task<IApiLeaderboardRecordList> ListLeaderboardRecordsAsync(
            string bearerToken
            , string leaderboardId
            , IEnumerable<string> ownerIds
            , int limit
            , string cursor)
        {
            if (leaderboardId == null)
            {
                throw new ArgumentException("'leaderboardId' is required but was null.");
            }

            var urlpath = "/v2/leaderboard/{leaderboard_id}?";
            urlpath = urlpath.Replace("{leaderboard_id}", Uri.EscapeDataString(leaderboardId));
            foreach (var elem in ownerIds ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "owner_ids=", elem, "&");
            }
            urlpath = string.Concat(urlpath, "limit=", limit, "&");
            if (cursor != null)
            {
                urlpath = string.Concat(urlpath, "cursor=", Uri.EscapeDataString(cursor), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiLeaderboardRecordList>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Write a record to a leaderboard.
        /// </summary>
        public async Task<IApiLeaderboardRecord> WriteLeaderboardRecordAsync(
            string bearerToken
            , string leaderboardId
            , WriteLeaderboardRecordRequestLeaderboardRecordWrite body)
        {
            if (leaderboardId == null)
            {
                throw new ArgumentException("'leaderboardId' is required but was null.");
            }
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/leaderboard/{leaderboard_id}?";
            urlpath = urlpath.Replace("{leaderboard_id}", Uri.EscapeDataString(leaderboardId));

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiLeaderboardRecord>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// List leaderboard records that belong to a user.
        /// </summary>
        public async Task<IApiLeaderboardRecordList> ListLeaderboardRecordsAroundOwnerAsync(
            string bearerToken
            , string leaderboardId
            , string ownerId
            , int limit)
        {
            if (leaderboardId == null)
            {
                throw new ArgumentException("'leaderboardId' is required but was null.");
            }
            if (ownerId == null)
            {
                throw new ArgumentException("'ownerId' is required but was null.");
            }

            var urlpath = "/v2/leaderboard/{leaderboard_id}/owner/{owner_id}?";
            urlpath = urlpath.Replace("{leaderboard_id}", Uri.EscapeDataString(leaderboardId));
            urlpath = urlpath.Replace("{owner_id}", Uri.EscapeDataString(ownerId));
            urlpath = string.Concat(urlpath, "limit=", limit, "&");

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiLeaderboardRecordList>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Fetch list of running matches.
        /// </summary>
        public async Task<IApiMatchList> ListMatchesAsync(
            string bearerToken
            , int limit
            , bool authoritative
            , string label
            , int minSize
            , int maxSize
            , string query)
        {

            var urlpath = "/v2/match?";
            urlpath = string.Concat(urlpath, "limit=", limit, "&");
            urlpath = string.Concat(urlpath, "authoritative=", authoritative.ToString().ToLower(), "&");
            if (label != null)
            {
                urlpath = string.Concat(urlpath, "label=", Uri.EscapeDataString(label), "&");
            }
            urlpath = string.Concat(urlpath, "min_size=", minSize, "&");
            urlpath = string.Concat(urlpath, "max_size=", maxSize, "&");
            if (query != null)
            {
                urlpath = string.Concat(urlpath, "query=", Uri.EscapeDataString(query), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiMatchList>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Delete one or more notifications for the current user.
        /// </summary>
        public async Task<IProtobufEmpty> DeleteNotificationsAsync(
            string bearerToken
            , IEnumerable<string> ids)
        {

            var urlpath = "/v2/notification?";
            foreach (var elem in ids ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "ids=", elem, "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("DELETE"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Fetch list of notifications.
        /// </summary>
        public async Task<IApiNotificationList> ListNotificationsAsync(
            string bearerToken
            , int limit
            , string cacheableCursor)
        {

            var urlpath = "/v2/notification?";
            urlpath = string.Concat(urlpath, "limit=", limit, "&");
            if (cacheableCursor != null)
            {
                urlpath = string.Concat(urlpath, "cacheable_cursor=", Uri.EscapeDataString(cacheableCursor), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiNotificationList>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Execute a Lua function on the server.
        /// </summary>
        public async Task<IApiRpc> RpcFunc2Async(
            string bearerToken
            , string id
            , string payload
            , string httpKey)
        {
            if (id == null)
            {
                throw new ArgumentException("'id' is required but was null.");
            }

            var urlpath = "/v2/rpc/{id}?";
            urlpath = urlpath.Replace("{id}", Uri.EscapeDataString(id));
            if (payload != null)
            {
                urlpath = string.Concat(urlpath, "payload=", Uri.EscapeDataString(payload), "&");
            }
            if (httpKey != null)
            {
                urlpath = string.Concat(urlpath, "http_key=", Uri.EscapeDataString(httpKey), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            if (!string.IsNullOrEmpty(bearerToken))
            {
                var header = string.Concat("Bearer ", bearerToken);
                request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            }

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiRpc>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Execute a Lua function on the server.
        /// </summary>
        public async Task<IApiRpc> RpcFuncAsync(
            string bearerToken
            , string id
            , string body)
        {
            if (id == null)
            {
                throw new ArgumentException("'id' is required but was null.");
            }
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/rpc/{id}?";
            urlpath = urlpath.Replace("{id}", Uri.EscapeDataString(id));

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            if (!string.IsNullOrEmpty(bearerToken))
            {
                var header = string.Concat("Bearer ", bearerToken);
                request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            }
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiRpc>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Get storage objects.
        /// </summary>
        public async Task<IApiStorageObjects> ReadStorageObjectsAsync(
            string bearerToken
            , ApiReadStorageObjectsRequest body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/storage?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiStorageObjects>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Write objects into the storage engine.
        /// </summary>
        public async Task<IApiStorageObjectAcks> WriteStorageObjectsAsync(
            string bearerToken
            , ApiWriteStorageObjectsRequest body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/storage?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("PUT"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiStorageObjectAcks>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Delete one or more objects by ID or username.
        /// </summary>
        public async Task<IProtobufEmpty> DeleteStorageObjectsAsync(
            string bearerToken
            , ApiDeleteStorageObjectsRequest body)
        {
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/storage/delete?";

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("PUT"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// List publicly readable storage objects in a given collection.
        /// </summary>
        public async Task<IApiStorageObjectList> ListStorageObjectsAsync(
            string bearerToken
            , string collection
            , string userId
            , int limit
            , string cursor)
        {
            if (collection == null)
            {
                throw new ArgumentException("'collection' is required but was null.");
            }

            var urlpath = "/v2/storage/{collection}?";
            urlpath = urlpath.Replace("{collection}", Uri.EscapeDataString(collection));
            if (userId != null)
            {
                urlpath = string.Concat(urlpath, "user_id=", Uri.EscapeDataString(userId), "&");
            }
            urlpath = string.Concat(urlpath, "limit=", limit, "&");
            if (cursor != null)
            {
                urlpath = string.Concat(urlpath, "cursor=", Uri.EscapeDataString(cursor), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiStorageObjectList>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// List publicly readable storage objects in a given collection.
        /// </summary>
        public async Task<IApiStorageObjectList> ListStorageObjects2Async(
            string bearerToken
            , string collection
            , string userId
            , int limit
            , string cursor)
        {
            if (collection == null)
            {
                throw new ArgumentException("'collection' is required but was null.");
            }
            if (userId == null)
            {
                throw new ArgumentException("'userId' is required but was null.");
            }

            var urlpath = "/v2/storage/{collection}/{user_id}?";
            urlpath = urlpath.Replace("{collection}", Uri.EscapeDataString(collection));
            urlpath = urlpath.Replace("{user_id}", Uri.EscapeDataString(userId));
            urlpath = string.Concat(urlpath, "limit=", limit, "&");
            if (cursor != null)
            {
                urlpath = string.Concat(urlpath, "cursor=", Uri.EscapeDataString(cursor), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiStorageObjectList>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// List current or upcoming tournaments.
        /// </summary>
        public async Task<IApiTournamentList> ListTournamentsAsync(
            string bearerToken
            , int categoryStart
            , int categoryEnd
            , int startTime
            , int endTime
            , int limit
            , string cursor)
        {

            var urlpath = "/v2/tournament?";
            urlpath = string.Concat(urlpath, "category_start=", categoryStart, "&");
            urlpath = string.Concat(urlpath, "category_end=", categoryEnd, "&");
            urlpath = string.Concat(urlpath, "start_time=", startTime, "&");
            urlpath = string.Concat(urlpath, "end_time=", endTime, "&");
            urlpath = string.Concat(urlpath, "limit=", limit, "&");
            if (cursor != null)
            {
                urlpath = string.Concat(urlpath, "cursor=", Uri.EscapeDataString(cursor), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiTournamentList>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// List tournament records.
        /// </summary>
        public async Task<IApiTournamentRecordList> ListTournamentRecordsAsync(
            string bearerToken
            , string tournamentId
            , IEnumerable<string> ownerIds
            , int limit
            , string cursor)
        {
            if (tournamentId == null)
            {
                throw new ArgumentException("'tournamentId' is required but was null.");
            }

            var urlpath = "/v2/tournament/{tournament_id}?";
            urlpath = urlpath.Replace("{tournament_id}", Uri.EscapeDataString(tournamentId));
            foreach (var elem in ownerIds ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "owner_ids=", elem, "&");
            }
            urlpath = string.Concat(urlpath, "limit=", limit, "&");
            if (cursor != null)
            {
                urlpath = string.Concat(urlpath, "cursor=", Uri.EscapeDataString(cursor), "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiTournamentRecordList>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Write a record to a tournament.
        /// </summary>
        public async Task<IApiLeaderboardRecord> WriteTournamentRecordAsync(
            string bearerToken
            , string tournamentId
            , WriteTournamentRecordRequestTournamentRecordWrite body)
        {
            if (tournamentId == null)
            {
                throw new ArgumentException("'tournamentId' is required but was null.");
            }
            if (body == null)
            {
                throw new ArgumentException("'body' is required but was null.");
            }

            var urlpath = "/v2/tournament/{tournament_id}?";
            urlpath = urlpath.Replace("{tournament_id}", Uri.EscapeDataString(tournamentId));

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("PUT"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);
            request.Content = new StringContent(body.ToJson());

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiLeaderboardRecord>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Attempt to join an open and running tournament.
        /// </summary>
        public async Task<IProtobufEmpty> JoinTournamentAsync(
            string bearerToken
            , string tournamentId)
        {
            if (tournamentId == null)
            {
                throw new ArgumentException("'tournamentId' is required but was null.");
            }

            var urlpath = "/v2/tournament/{tournament_id}/join?";
            urlpath = urlpath.Replace("{tournament_id}", Uri.EscapeDataString(tournamentId));

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("POST"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ProtobufEmpty>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// List tournament records for a given owner.
        /// </summary>
        public async Task<IApiTournamentRecordList> ListTournamentRecordsAroundOwnerAsync(
            string bearerToken
            , string tournamentId
            , string ownerId
            , int limit)
        {
            if (tournamentId == null)
            {
                throw new ArgumentException("'tournamentId' is required but was null.");
            }
            if (ownerId == null)
            {
                throw new ArgumentException("'ownerId' is required but was null.");
            }

            var urlpath = "/v2/tournament/{tournament_id}/owner/{owner_id}?";
            urlpath = urlpath.Replace("{tournament_id}", Uri.EscapeDataString(tournamentId));
            urlpath = urlpath.Replace("{owner_id}", Uri.EscapeDataString(ownerId));
            urlpath = string.Concat(urlpath, "limit=", limit, "&");

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiTournamentRecordList>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// Fetch zero or more users by ID and/or username.
        /// </summary>
        public async Task<IApiUsers> GetUsersAsync(
            string bearerToken
            , IEnumerable<string> ids
            , IEnumerable<string> usernames
            , IEnumerable<string> facebookIds)
        {

            var urlpath = "/v2/user?";
            foreach (var elem in ids ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "ids=", elem, "&");
            }
            foreach (var elem in usernames ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "usernames=", elem, "&");
            }
            foreach (var elem in facebookIds ?? new string[0])
            {
                urlpath = string.Concat(urlpath, "facebook_ids=", elem, "&");
            }

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiUsers>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }

        /// <summary>
        /// List groups the current user belongs to.
        /// </summary>
        public async Task<IApiUserGroupList> ListUserGroupsAsync(
            string bearerToken
            , string userId)
        {
            if (userId == null)
            {
                throw new ArgumentException("'userId' is required but was null.");
            }

            var urlpath = "/v2/user/{user_id}/group?";
            urlpath = urlpath.Replace("{user_id}", Uri.EscapeDataString(userId));

            var request = new HttpRequestMessage
            {
                RequestUri = new Uri(_baseUri, urlpath),
                Method = new HttpMethod("GET"),
                Headers =
                {
                    Accept = {new MediaTypeWithQualityHeaderValue("application/json")}
                }
            };
            var header = string.Concat("Bearer ", bearerToken);
            request.Headers.Authorization = AuthenticationHeaderValue.Parse(header);

            var response = await _httpClient.SendAsync(request);
            var contents = await response.Content.ReadAsStringAsync();
            if (response.IsSuccessStatusCode)
            {
                return contents.FromJson<ApiUserGroupList>();
            }
            response.Content?.Dispose();
            var decoded = contents.FromJson<Dictionary<string, object>>();
            throw new ApiResponseException(response.StatusCode, decoded["error"].ToString(), (int) decoded["code"]);
        }
    }
}
